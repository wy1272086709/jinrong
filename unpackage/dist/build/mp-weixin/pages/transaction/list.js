(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/transaction/list"],{"03ed":function(t,n,e){},"22e7":function(t,n,e){"use strict";e.r(n);var o=e("dbbf"),a=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,(function(){return o[t]}))}(r);n["default"]=a.a},3935:function(t,n,e){},7072:function(t,n,e){"use strict";var o=e("3935"),a=e.n(o);a.a},b83e:function(t,n,e){"use strict";e.r(n);var o=e("c4fc"),a=e("22e7");for(var r in a)"default"!==r&&function(t){e.d(n,t,(function(){return a[t]}))}(r);e("cdd8"),e("7072");var s,i=e("f0c5"),c=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=c.exports},c4fc:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return r})),e.d(n,"a",(function(){return o}));var o={uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"5137"))},uSearch:function(){return e.e("uview-ui/components/u-search/u-search").then(e.bind(null,"461c"))},uLoadmore:function(){return e.e("uview-ui/components/u-loadmore/u-loadmore").then(e.bind(null,"a8b1"))},uModal:function(){return e.e("uview-ui/components/u-modal/u-modal").then(e.bind(null,"db88"))}},a=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.transactionList,(function(n,e){var o=t.__get_orig(n),a=t.getStategyTrasactionInfo(n),r=t.getStrategyInfo(n);return{$orig:o,m0:a,m1:r}})));t.$mp.data=Object.assign({},{$root:{l0:e}})},r=[]},cdd8:function(t,n,e){"use strict";var o=e("03ed"),a=e.n(o);a.a},d4eb:function(t,n,e){"use strict";(function(t){e("8d98");o(e("66fd"));var n=o(e("b83e"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},dbbf:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("a34a")),a=e("2f62"),r=e("ab5d"),s=e("b11a");function i(t){return t&&t.__esModule?t:{default:t}}function c(t,n,e,o,a,r,s){try{var i=t[r](s),c=i.value}catch(u){return void e(u)}i.done?n(c):Promise.resolve(c).then(o,a)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var r=t.apply(n,e);function s(t){c(r,o,a,s,i,"next",t)}function i(t){c(r,o,a,s,i,"throw",t)}s(void 0)}))}}function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){d(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function d(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var p=function(){e.e("components/transaction_component_item").then(function(){return resolve(e("4c48"))}.bind(null,e)).catch(e.oe)},h={computed:f(f({},(0,a.mapState)(["strategistId"])),{},{zIndex:function(){return""!==this.dropdownIndex?99999999:90},options:function(){return this.isShowContract?this.options1:this.isShowStatus?this.options2:[]}}),data:function(){return{value:1,value1:"所有合约",value2:-1,options1:[],searchValue:"",showMsg:!1,msg:"",dropdownIndex:"",width:"",height:"",options2:[],status:"nomore",transactionList:[],contractTitle:"所有合约",statusTitle:"所有状态",styleStr:"",marginTop:"",isShowContract:!1,isShowStatus:!1,old:{scrollTop:0},searchKeyword:""}},onLoad:function(){var n=this;return u(o.default.mark((function e(){var a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.options2=(0,s.getStatusList)(),a=t.getSystemInfoSync(),n.width=a.windowWidth+"px",n.height=a.windowHeight-t.upx2px(104)+"px",n.marginTop="56px";case 5:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){this.initTransactionList(!0)},onShow:function(){var t=this;return u(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.contractTitle,t.initTransactionList();case 2:case"end":return n.stop()}}),n)})))()},components:{transactionComponentItem:p},methods:{closeMask:function(){this.isShowContract=!1,this.isShowStatus=!1},switchMenu:function(t){var n=this;return u(o.default.mark((function e(){var a,s,i,c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.isShowContract||n.isShowStatus){e.next=11;break}return a=n.options1.findIndex((function(n){return n.value==t.value})),n.contractTitle=n.options1[a].label,n.value1=n.contractTitle,n.isShowContract=!1,n.isShowStatus=!1,e.next=8,(0,r.getTransactionInfoList)(n.strategistId,n.value2,n.value1,n.searchKeyword);case 8:s=e.sent,n.transactionList=s.strategy_list,s.totalpage;case 11:if(n.isShowContract||!n.isShowStatus){e.next=22;break}return n.value2=t.value,i=n.options2.findIndex((function(n){return n.value==t.value})),n.statusTitle=n.options2[i].label,n.isShowContract=!1,n.isShowStatus=!1,e.next=19,(0,r.getTransactionInfoList)(n.strategistId,n.value2,n.value1,n.searchKeyword);case 19:c=e.sent,n.transactionList=c.strategy_list,c.totalpage;case 22:case"end":return e.stop()}}),e)})))()},selectStatus:function(){this.isShowContract=!1,this.isShowStatus=!this.isShowStatus},selectContract:function(){console.log("selectContract..."),this.isShowContract=!this.isShowContract,this.isShowStatus=!1},initTransactionList:function(n){var e=this;return u(o.default.mark((function a(){var s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,r.getTransactionInfoList)(e.strategistId,e.value2,e.contractTitle,e.searchKeyword);case 2:s=o.sent,e.transactionList=s.strategy_list,e.options1=[{label:"所有合约",value:"所有合约"}].concat(e.transformContract(s.contract)),console.log("init transaction list"),s.totalpage,n&&t.stopPullDownRefresh();case 8:case"end":return o.stop()}}),a)})))()},openDropdown:function(t){console.log("openDropdown+index"+t),this.dropdownIndex=t},clearKeyword:function(){var t=this;return u(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.getTransactionInfoList)(t.strategistId,t.value2,t.value1);case 2:e=n.sent,t.transactionList=e.strategy_list,e.totalpage;case 5:case"end":return n.stop()}}),n)})))()},closeDropdown:function(t){this.dropdownIndex=""},transformContract:function(t){for(var n=Object.values(t),e=Object.values(t),o=[],a=0;a<n.length;a++){var r={value:n[a],label:e[a]};o.push(r)}return o},getStategyTrasactionInfo:function(t){var n={winRatio:t.profit_loss.rate,accumulatedIncome:t.accumulated_income,accumulatedIncomeRatio:t.cumulative_rate,totalStorings:t.positions.pos,kaiduoStorings:t.positions.long_pos,kaikongStrorings:t.positions.short_pos,kaiduoPrice:t.positions.long_open_price,kaikongPrice:t.positions.short_open_price};return console.log("getStategyTrasactionInfo"+JSON.stringify(n)),n},getStrategyInfo:function(t){return{sName:t.sName,id:t.id,status:t.status,strategyGroupName:t.cgroup_name}},pingduoFunc:function(t){var n=this;return u(o.default.mark((function e(){var a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.oneKeyDoneFunc)(n.strategistId,t,"long");case 2:a=e.sent,1==a.status?(n.showMsg=!0,n.msg=a.msg,setTimeout(u(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.initTransactionList();case 1:case"end":return t.stop()}}),t)}))),2e3)):(n.showMsg=!0,n.msg=a.msg);case 4:case"end":return e.stop()}}),e)})))()},changeValue1:function(t){var n=this;return u(o.default.mark((function e(){var a,s;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value1=t,a=n.options1.findIndex((function(n){return n.value==t})),n.contractTitle=n.options1[a].label,n.value1=n.contractTitle,e.next=6,(0,r.getTransactionInfoList)(n.strategistId,n.value2,n.value1,n.searchKeyword);case 6:s=e.sent,n.transactionList=s.strategy_list,s.totalpage,console.log("change value1:"+t);case 10:case"end":return e.stop()}}),e)})))()},changeValue2:function(t){var n=this;return u(o.default.mark((function e(){var a,s;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value2=t,a=n.options2.findIndex((function(n){return n.value==t})),n.statusTitle=n.options2[a].label,e.next=5,(0,r.getTransactionInfoList)(n.strategistId,n.value2,n.value1,n.searchKeyword);case 5:s=e.sent,n.transactionList=s.strategy_list,s.totalpage,console.log("change value2:"+t);case 9:case"end":return e.stop()}}),e)})))()},lower:function(){console.log("lower!")},upper:function(){},change:function(t){var n=t.value;this.searchKeyword=n},confirmSearch:function(){var t=this;return u(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("searchword is: ",t.searchKeyword),n.next=3,(0,r.getTransactionInfoList)(t.strategistId,t.value2,t.value1,t.searchKeyword);case 3:e=n.sent,t.transactionList=e.strategy_list;case 5:case"end":return n.stop()}}),n)})))()},pingkongFunc:function(t){var n=this;return u(o.default.mark((function e(){var a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.oneKeyDoneFunc)(n.strategistId,t,"short");case 2:a=e.sent,1==a.status?(n.showMsg=!0,n.msg=a.msg,setTimeout(u(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.initTransactionList();case 1:case"end":return t.stop()}}),t)}))),2e3)):(n.showMsg=!0,n.msg=a.msg);case 4:case"end":return e.stop()}}),e)})))()},gotoTrasactionPage:function(n){console.log("gotoTrasactionPage"),t.navigateTo({url:"/pages/transaction/transaction?sName="+n.sName+"&sid="+n.id,fail:function(t){console.log("fail navigate:"+JSON.stringify(t))}})}},onReachBottom:function(){}};n.default=h}).call(this,e("543d")["default"])}},[["d4eb","common/runtime","common/vendor"]]]);