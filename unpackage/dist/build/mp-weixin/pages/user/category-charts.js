(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/category-charts"],{"580d":function(t,e,n){"use strict";n.r(e);var r=n("6130"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},6130:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("a34a")),i=n("3d10"),o=(n("70da"),n("2f62"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(l){return void n(l)}u.done?e(s):Promise.resolve(s).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,u,"next",t)}function u(t){c(o,r,i,a,u,"throw",t)}a(void 0)}))}}var d={data:function(){return{categoryList:[],itemHeight:"",itemTopHeight:"",isIphoneX:!1,scrollHeight:"",navigatorUrl:"",chartData:[],status:"nomore",opts:{xAxis:{disabled:!0,disableGrid:!0,axisLine:!1},enableMarkLine:!0,yAxis:{disabled:!1,disableGrid:!1,gridType:"dash",dashLength:4,gridColor:"rgba(255, 255, 255, 0.2)",data:[{fontColor:"#666666",position:"right",disabled:!1,unit:"%",axisLine:!1,tofix:2,format:function(t){return t+"%"}}]},legend:{show:!1,position:"top",float:"center"},extra:{tooltip:{showBox:!1,splitLine:!1},markLine:{type:"dash",dashLength:4,data:[{value:"0",showLabel:!0}]}}}}},onShow:function(){var t=this;return f(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.interval=setInterval(f(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.initPage();case 1:case"end":return e.stop()}}),e)}))),5e3);case 1:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.interval&&clearInterval(this.interval)},onHide:function(){this.interval&&clearInterval(this.interval)},computed:s(s({},(0,o.mapState)(["strategistId"])),{},{getChartData:function(){var t=this;return function(e){if(0==t.chartData.length)return{};var n=t.chartData[e];return console.log(n),n.categories&&n.categories.length>0?n:{}}}}),onLoad:function(e){var n=this;return f(r.default.mark((function i(){var o,a,u;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.cgroup_ids=[],t.setNavigationBarTitle({title:e.title}),console.log(e),n.groupId=e.groupId,n.title=e.title,n.navigatorUrl="/pages/user/category_view",o=t.getSystemInfoSync(),a=getApp().globalData.isIphoneX,n.isIphoneX=a,u=a?t.upx2px(68):0,n.scrollHeight=o.windowHeight-u+"px",n.itemHeight=(o.windowHeight-u-t.upx2px(50))/3+"px",n.itemTopHeight=(o.windowHeight-u-t.upx2px(50))/3-t.upx2px(176)+"px",n.initPage();case 14:case"end":return r.stop()}}),i)})))()},methods:{initPage:function(){var t=this;return f(r.default.mark((function e(){var n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=(0,i.getCgrouplist)(t.groupId,t.strategistId).catch((function(t){return JSON.stringify(t)})),e.prev=1,e.next=4,n;case 4:o=e.sent,t.combineData(o),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})))()},combineData:function(t){for(var e=t.length,n=[],r=[],i=0;i<e;i++){var o={title:t[i].cname,initial_capital:t[i].initial_capital,now_capital:t[i].now_capital,startDate:t[i].start_time.substr(0,10),nid:t[i].id,annualized_return:t[i].annualized_return,isOpen:t[i].positions>0?1:0,month_profit:void 0!==t[i].profits.month?t[i].profits.month:"",nearly_month:void 0!==t[i].yield.month?t[i].yield.month:"",year_profit:void 0!==t[i].profits.year?t[i].profits.year:"",nearly_year:void 0!==t[i].yield.year?t[i].yield.year:"",week_profit:void 0!==t[i].profits.week?t[i].profits.week:"",nearly_week:void 0!==t[i].yield.week?t[i].yield.week:"",total_profit:void 0!==t[i].profits.total?t[i].profits.total:"",nearly_total:void 0!==t[i].yield.total?t[i].yield.total:"",run_time:t[i].run_time,yieldPositions:t[i].yield.positions,profitsPositions:t[i].profits.positions};n.push(o)}n.length>0&&(this.categoryList=n),r.length>0&&(this.cgroup_ids=r)},getTimeDiff:function(t){var e=Date.parse(t),n=(new Date).getTime(),r=n-e,i=Math.floor(r/864e5);return i+"天"},gotoCategoryPage:function(e){console.log(e),console.log(this.navigatorUrl),t.navigateTo({url:this.navigatorUrl+"?title="+e.title+"&cgroup_id="+e.nid})},complete:function(t){console.log(t);var e=t.id.substr(7),n=this.categoryList.findIndex((function(t){return t.nid==e}));-1!==n&&(this.categoryList[n].showText=!0)},drawText:function(e){var n=t.createCanvasContext(e),r="累计收益: 3000.00";n.strokeStyle="#FFFFFF",n.font="25px bold",n.strokeText(r,100,100),n.stroke()},getIndex:function(t){}}};e.default=d}).call(this,n("543d")["default"])},"78ef":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uTag:function(){return n.e("uview-ui/components/u-tag/u-tag").then(n.bind(null,"a372"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"a8b1"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.categoryList,(function(e,n){var r=t.__get_orig(e),i=parseInt(e.run_time.split("天")[0]),o=e.week_profit.toFixed(2),a=e.nearly_week.toFixed(2),u=e.month_profit.toFixed(2),s=e.nearly_month.toFixed(2),l=e.year_profit.toFixed(2),c=e.nearly_year.toFixed(2),f=e.total_profit.toFixed(2),d=e.nearly_total.toFixed(2);return{$orig:r,m0:i,g0:o,g1:a,g2:u,g3:s,g4:l,g5:c,g6:f,g7:d}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},o=[]},8596:function(t,e,n){"use strict";var r=n("ce94"),i=n.n(r);i.a},"872e":function(t,e,n){"use strict";n.r(e);var r=n("78ef"),i=n("580d");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("8596");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=s.exports},"9ea8":function(t,e,n){"use strict";(function(t){n("8d98");r(n("66fd"));var e=r(n("872e"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ce94:function(t,e,n){}},[["9ea8","common/runtime","common/vendor"]]]);