(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/category_view"],{"289e":function(t,e,n){"use strict";(function(t){n("8d98");o(n("66fd"));var e=o(n("6f38"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"52b7":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uDropdown:function(){return n.e("uview-ui/components/u-dropdown/u-dropdown").then(n.bind(null,"8a30"))},uDropdownItem:function(){return n.e("uview-ui/components/u-dropdown-item/u-dropdown-item").then(n.bind(null,"5db2"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"5e8d"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"a306"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"a8b1"))},uModal:function(){return n.e("uview-ui/components/u-modal/u-modal").then(n.bind(null,"db88"))}},r=function(){var t=this,e=t.$createElement,n=(t._self._c,{"margin-top":"75rpx"}),o=t.__map(t.categoryList,(function(e,n){var o=t.__get_orig(e),r=t.categoryList.length>0?t.__map(e.slist,(function(e,n){var o=t.__get_orig(e),r=1!=e.is_manual&&4!=e.status?t.hasPingStoreBtn(e):null;return{$orig:o,m0:r}})):null;return{$orig:o,l0:r}}));t.$mp.data=Object.assign({},{$root:{a0:n,l1:o}})},i=[]},"6f38":function(t,e,n){"use strict";n.r(e);var o=n("52b7"),r=n("fd9d");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("fc6f");var a,s=n("f0c5"),u=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=u.exports},afd0:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=l(n("a34a")),r=n("8314"),i=n("3d10"),a=n("ab5d"),s=n("2f62"),u=n("6cda");function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,r,i,a){try{var s=t[i](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(o,r)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){c(i,o,r,a,s,"next",t)}function s(t){c(i,o,r,a,s,"throw",t)}a(void 0)}))}}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){n.e("common/strategy-component-item").then(function(){return resolve(n("d09d"))}.bind(null,n)).catch(n.oe)},v={data:function(){return{width:"",height:"",status:"nomore",strategyInfo:{},msg:"",checkStop:!1,dropdownIndex:"",categoryList:[],scrollHeight:"",value1:"ALL",value2:-1,value3:0,options1:[],options2:[],oldValue2:"",title3:"策略分类",options3:[],isIphoneX:!1,customStyle1:{},customStyle2:{color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(38,214,80,1)",marginBottom:"30rpx",width:"160rpx",height:"60rpx"},isShowCancel:!1,showModal:!1,title1:"全部币种",title2:"所有状态",isCgroupId:!1,marginTop:""}},computed:p(p({},(0,s.mapState)(["strategistId"])),{},{zIndex:function(){return""!==this.dropdownIndex?99999999:2}}),components:{strategyComponentItem:h},onLoad:function(e){var n=this;return d(o.default.mark((function i(){var a,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=t.getSystemInfoSync(),console.log("info"+JSON.stringify(a)),n.width=a.windowWidth+"px",n.height=a.windowHeight+"px",e.title&&t.setNavigationBarTitle({title:e.title}),e.groupId?(n.groupId=e.groupId,n.isCgroupId=!1):e.cgroup_id&&(n.groupId=e.cgroup_id,n.isCgroupId=!0),n.options2=(0,r.getRunningStatus)(),n.isIphoneX=getApp().globalData.isIphoneX,s=n.isIphoneX?t.upx2px(68):0,n.scrollHeight=a.windowHeight-t.upx2px(75)-s,n.marginTop=t.upx2px(79),n.setCategoryList();case 12:case"end":return o.stop()}}),i)})))()},onShow:function(){var t=this;this.interval=setInterval(d(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.setCategoryList();case 1:case"end":return e.stop()}}),e)}))),5e3)},beforeDestroy:function(){this.interval&&clearInterval(this.interval)},onHide:function(){this.interval&&clearInterval(this.interval)},methods:{statusControl:function(t){var e=this;return d(o.default.mark((function n(){var r,i,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1==t.status||2==t.status){n.next=2;break}return n.abrupt("return");case 2:return r=t.status,i=2!=r,n.next=6,(0,u.statusControl)(i,t.id);case 6:a=n.sent,console.log("resp"+JSON.stringify(a)),e.isShowCancel=!1,e.msg=a.msg,e.showModal=!0,setTimeout((function(){e.setCategoryList(),e.showModal=!1}),1e3);case 12:case"end":return n.stop()}}),n)})))()},gotoDetail:function(e){t.navigateTo({url:"/pages/user/detail_page?sName="+e.sName+"&cname="+(void 0!==e.cname?e.cname:"")})},gotoIncomeDetail:function(e){var n=e.sName,o="/pages/user/income_detail?sName="+n;t.navigateTo({url:o})},hasPingStoreBtn:function(t){return console.log(t),console.log(t.positions),void 0!==t.positions&&0!=t.positions.pos&&void 0!==t.positions.pos},pingFunc:function(t){var e=this;return d(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.isShowCancel=!0,e.showModal=!0,e.msg="你确定要平仓吗?",e.item=t;case 4:case"end":return n.stop()}}),n)})))()},confirmPingStore:function(){var t=this,e=function(){var e=d(o.default.mark((function e(n){var r,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="",void 0!==n.positions&&void 0!==n.positions.pos&&0!=n.positions.pos?r="long":void 0!==n.positions&&void 0!==n.positions.pos&&0!=n.positions.pos&&(r="short"),e.next=4,(0,a.oneKeyDoneFunc)(t.strategistId,n.id,r);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=e(this.item);this.msg=void 0!==n.msg?n.msg:void 0!==n.message?n.message:"",this.showModal=!0,this.isShowCancel=!1,setTimeout((function(){t.setCategoryList(),t.showModal=!1}),1e3)},gotoMoneyDetail:function(e){t.navigateTo({url:"/pages/user/money_detail?sName="+e.sName})},setCategoryList:function(){var t=this;return d(o.default.mark((function e(){var n,r,a,s,u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getStrategyCategory)(t.groupId,t.value2,t.strategistId,t.isCgroupId);case 2:if(n=e.sent,0!=n.currency_list.length){e.next=6;break}return t.categoryList=[],e.abrupt("return",[]);case 6:for(r=n.category_rows,a=n.currency_list,s=[{label:"全部币种",value:"ALL"}],u=0;u<a.length;u++)s.push({label:a[u],value:a[u]});t.options1=s,r=Object.values(r),t.categoryList=r;case 13:case"end":return e.stop()}}),e)})))()},openDropdown:function(t){console.log("openDropdown+index"+t),this.dropdownIndex=t},closeDropdown:function(t){this.dropdownIndex=""},transformToOptions:function(t){var e=[];return t.forEach((function(t){e.push({label:t.name,value:t.id})})),e},transformChildGroupToOptions:function(t){for(var e=[],n=t.length,o=0;o<n;o++)e.push({label:t[o].name,value:t[o].id});return e},changeCheckbox:function(t){var e=this,n=t.detail.value;if(console.log("values"+JSON.stringify(n)),n.length>0)this.oldValue2=this.value2,this.value2=4,console.log("this.oldValue2:"+this.oldValue2),this.checkStop=!0,this.title2="运行状态",this.setCategoryList();else{this.value2=this.oldValue2;var o=this.options2.findIndex((function(t){return t.value==e.value2}));this.checkStop=!1,this.title2=this.options2[o].label,this.setCategoryList()}},changeValue1:function(t){var e=this;return d(o.default.mark((function n(){var r,a,s,u,l,c,d;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.value1=t,r=e.options1.findIndex((function(e){return e.value==t})),e.title1=e.options1[r].label,n.next=5,(0,i.getStrategyCategory)(e.groupId,e.value2,e.strategistId);case 5:if(a=n.sent,console.log("res:"+JSON.stringify(a)+",title3:"),0!=a.currency_list.length){n.next=9;break}return n.abrupt("return");case 9:if(s=a.category_rows,"ALL"!=t){n.next=13;break}return e.categoryList=Object.values(s),n.abrupt("return");case 13:for(s=Object.values(s),u=[],l=0;l<s.length;l++)c=s[l].slist,d=c.filter((function(e){return e.currency==t})),console.log("res:"+JSON.stringify(d)),d.length>0&&u.push({title:s[l].title,slist:d});e.categoryList=u,console.log("filter currency values:"+JSON.stringify(s)),console.log("change value1:"+t);case 19:case"end":return n.stop()}}),n)})))()},changeValue2:function(t){this.value2=t,this.oldValue2=t;var e=this.options2.findIndex((function(e){return e.value===t}));this.title2=this.options2[e].label,this.checkStop=!1,console.log("change value2:"+t),this.setCategoryList()},changeValue3:function(t){this.value3=t;var e=this.options3.findIndex((function(e){return e.value==t}));this.title3=this.options3[e].label,console.log("change value1:"+t),this.setCategoryList()},gotoStrategyDetail:function(e){console.log("gotoStrategyDetail"),t.navigateTo({url:"/pages/user/detail_view?sName="+e.sName})},gotoCategoryView:function(){console.log("gotoCategoryView...")}},onReachBottom:function(){this.status="nomore"}};e.default=v}).call(this,n("543d")["default"])},f1c1:function(t,e,n){},fc6f:function(t,e,n){"use strict";var o=n("f1c1"),r=n.n(o);r.a},fd9d:function(t,e,n){"use strict";n.r(e);var o=n("afd0"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a}},[["289e","common/runtime","common/vendor"]]]);