(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/history_delegate_log"],{"22f1":function(t,e,n){"use strict";n.r(e);var a=n("e48f"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"2d86":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uTabsSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(n.bind(null,"97a5"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"a8b1"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"2707"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"5137"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"5e8d"))},wPicker:function(){return n.e("components/w-picker/w-picker").then(n.bind(null,"7f16"))},uSelect:function(){return n.e("uview-ui/components/u-select/u-select").then(n.bind(null,"ccd6"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.historyDelegateLogList,(function(e,n){var a=t.__get_orig(e),i=e.description.indexOf("开多"),o=e.description.indexOf("开空"),r=e.description.indexOf("开多"),s=e.opening_at.substr(0,16);return{$orig:a,g0:i,g1:o,g2:r,g3:s}}))),a=t.__map(t.history_data,(function(e,n){var a=t.__get_orig(e),i=t.history_data.length>0?e.statusTxt.indexOf("买入"):null;return{$orig:a,g4:i}}));t.$mp.data=Object.assign({},{$root:{l0:n,l1:a}})},o=[]},"618c":function(t,e,n){},"6af3":function(t,e,n){"use strict";(function(t){n("8d98");a(n("66fd"));var e=a(n("6be5"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"6be5":function(t,e,n){"use strict";n.r(e);var a=n("2d86"),i=n("22f1");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("73c7");var r,s=n("f0c5"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=u.exports},"73c7":function(t,e,n){"use strict";var a=n("618c"),i=n.n(a);i.a},e48f:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("a34a")),i=n("6cda"),o=n("985d"),r=n("ad3d");function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,a,i,o,r){try{var s=t[o](r),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(a,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function r(t){u(o,a,i,r,s,"next",t)}function s(t){u(o,a,i,r,s,"throw",t)}r(void 0)}))}}var l=function(){n.e("components/delegate-component-item").then(function(){return resolve(n("7bc7"))}.bind(null,n)).catch(n.oe)},d=1,f=1,h={data:function(){return{activeTabIndex:0,historyDelegateLogList:[],scrollheight:"",scrollheight1:"",history_data:[],marginTop:"100",historyStatus:"loadmore",sDateText:"开始日期",eDateText:"结束日期",winRatio:0,index:0,isIphoneX:!1,title1:"所有操作",currencyPairs:"",options1:[{label:"所有",value:0},{label:"买入开多",value:1},{label:"卖出开空",value:3},{label:"买入平空",value:4},{label:"卖出平多",value:5},{label:"资金费",value:6}],value1:0,rangeVisible:!1,startYear:"",swiperHeight:"",endYear:"",rangeVal:"",isShowDx:!1,showStatus:!1}},components:{delegateComponentItem:l},onLoad:function(e){var n=this;return c(a.default.mark((function r(){var s,u,c,l,d,f,h,g;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.sName=e.sName,n.sid=e.sid,s=t.getSystemInfoSync(),console.log(n.historyDelegateLogList),u=s.windowWidth,c=s.windowHeight,l=750/u,console.log("radio"+l),n.isIphoneX=getApp().globalData.isIphoneX,n.currencyPairs=e.currencyPairs,d=n.isIphoneX?t.upx2px(68):0,f=40+t.upx2px(80)+t.upx2px(3)+5,n.scrollheight=c-t.upx2px(80)-t.upx2px(3)-5-d+"px",n.scrollheight1=c-f-d+"px",n.swiperHeight=c-41+"px",n.marginTop=parseFloat((s.windowHeight-f-90)/2*l).toFixed(2),console.log("marginTop",n.marginTop),h=new Date,n.endYear=h.getFullYear(),n.startYear=parseInt(n.endYear)-2,n.rangeVal=[n.getMonthFirstDay(),n.getTodayDay()],a.next=23,(0,o.getSingleStrategyStatData)(n.sName);case 23:return g=a.sent,n.winRatio=void 0!==g.profit_loss?g.profit_loss.rate:"0",a.prev=25,a.next=28,(0,i.getHistoryDelegateLogList)(n.sid);case 28:n.historyDelegateLogList=a.sent,n.initHistoryLogList(n.sName),a.next=35;break;case 32:a.prev=32,a.t0=a["catch"](25),n.historyDelegateLogList=[];case 35:case"end":return a.stop()}}),r,null,[[25,32]])})))()},onReachBottom:function(){var e=this;if(0!=this.activeTabIndex){if(console.log("nowpage",f,"totalPage",d),console.log("reach bottom:"),f>=d)return this.isShowDx=!0,void(this.historyStatus="nomore");t.showLoading({title:"加载中.."}),setTimeout(c(a.default.mark((function n(){var i,o,s,u,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.historyStatus="loadmore",1!=e.activeTabIndex){n.next=13;break}return f++,i="开始日期"==e.sDateText?"":e.sDateText,o="结束日期"==e.eDateText?"":e.eDateText,s="所有操作"==e.title1?"":e.title1,u={offset_direction:s,datestart:i,datestop:o},n.next=9,(0,r.getStrategyTransactionList)(e.sName,f,u);case 9:c=n.sent,1==c.status&&(e.history_data=e.history_data.concat(c.data)),n.next=14;break;case 13:e.activeTabIndex;case 14:t.hideLoading();case 15:case"end":return n.stop()}}),n)}))),500)}},methods:{lower:function(){var e=this;if(0!=this.activeTabIndex){if(console.log("nowpage",f,"totalPage",d),console.log("reach bottom:"),f>=d)return this.isShowDx=!0,void(this.historyStatus="nomore");t.showLoading({title:"加载中.."}),setTimeout(c(a.default.mark((function n(){var i,o,s,u,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.historyStatus="loadmore",1!=e.activeTabIndex){n.next=13;break}return f++,i="开始日期"==e.sDateText?"":e.sDateText,o="结束日期"==e.eDateText?"":e.eDateText,s="所有操作"==e.title1||"所有"==e.title1?"":e.title1,u={offset_direction:s,datestart:i,datestop:o},n.next=9,(0,r.getStrategyTransactionList)(e.sName,f,u);case 9:c=n.sent,1==c.status&&(e.history_data=e.history_data.concat(c.data)),n.next=14;break;case 13:e.activeTabIndex;case 14:t.hideLoading();case 15:case"end":return n.stop()}}),n)}))),500)}},clickSwithTab:function(t){var e=this;return c(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.switchTabFunc(t);case 1:case"end":return n.stop()}}),n)})))()},change:function(t){},switchTabFunc:function(t){var e=this;return c(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t==e.activeTabIndex){n.next=19;break}if(1!=t){n.next=7;break}return e.activeTabIndex=t,n.next=5,e.initHistoryLogList(e.sName);case 5:n.next=19;break;case 7:if(0!=t){n.next=19;break}return e.activeTabIndex=t,n.prev=9,n.next=12,(0,i.getHistoryDelegateLogList)(e.sid);case 12:e.historyDelegateLogList=n.sent,n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](9),console.log(n.t0),e.historyDelegateLogList=[];case 19:case"end":return n.stop()}}),n,null,[[9,15]])})))()},animationfinish:function(t){var e=t.detail.current;this.$refs.tabs.setFinishCurrent(e),this.switchTabFunc(e)},transition:function(t){var e=t.detail.dx;console.log(e),this.$refs.tabs.setDx(e)},startDateOpen:function(){this.rangeVisible=!0},showStatusView:function(){this.showStatus=!this.showStatus},initHistoryLogList:function(t){var e=this;return c(a.default.mark((function n(){var i,o,s,u,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i="开始日期"==e.sDateText?"":e.sDateText,o="结束日期"==e.eDateText?"":e.eDateText,s="所有操作"==e.title1||"所有"==e.title1?"":e.title1,u={offset_direction:s,datestart:i,datestop:o},n.next=6,(0,r.getStrategyTransactionList)(t,1,u);case 6:if(c=n.sent,console.log("res:"+JSON.stringify(c)),1==c.status?(e.history_data=c.data,d=c.totalPage):e.history_data=[],f=1,!(f>=d)){n.next=15;break}return e.isShowDx=!0,n.abrupt("return");case 15:e.isShowDx=!1;case 16:case"end":return n.stop()}}),n)})))()},getMonthFirstDay:function(){var t=new Date,e="-",n=t.getFullYear(),a=t.getMonth()+1;a>=1&&a<=9&&(a="0"+a);var i=n+e+a+e+"01";return i},getTodayDay:function(){var t=new Date,e="-",n=t.getFullYear(),a=t.getMonth()+1;a>=1&&a<=9&&(a="0"+a);var i=t.getDate(),o=n+e+a+e+(i>10?i:"0"+i);return o},confirm:function(t){console.log(t),this.title1=t[0].label,this.statusRow=t[0];var e=this.options1.findIndex((function(e){return e.value==t[0].value}));console.log("index:"+e),this.index=e,this.initHistoryLogList(this.sName)},onConfirm:function(t){this.sDateText=t.value[0],this.eDateText=t.value[1],this.initHistoryLogList(this.sName)},onCancel:function(t){}}};e.default=h}).call(this,n("543d")["default"])}},[["6af3","common/runtime","common/vendor"]]]);